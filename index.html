<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./pages/index.css">
</head>
<body>
    <main>
        <section class="section">
            <div class="container">
                <h1 class="title-page">
                    Рейтинг друзей
                </h1>
                <ul class="cards-list">
                    <li class="card">
                        <div class="card__image-wrapper">
                            <img
                                alt=""
                                src="./images/avatar-1.webp"
                                class="card__image">
                        </div>
                        <p class="card__name">
                            Тилик
                        </p>
                        <div class="card__control">
                            <button class="card__control-button card__control-button__delete"></button>
                            <span class="card__control-count">0</span>
                            <button class="card__control-button card__control-button__add"></button>
                        </div>
                        <ul class="card__comment-list">
                            <li class="card__comment">
                                <div class="card__comment-info">
                                    <span class="card__comment-date">
                                        18.11
                                    </span>
                                    <span class="card__comment-author">
                                        Ирэн
                                    </span>
                                    <span class="card__comment-count card__comment-count__bad">
                                        -1
                                    </span>
                                </div>
                                <p class="card__comment-text">
                                    Пердел под одеялом
                                </p>
                            </li>
                            <div class="card__other-comment">
                                <span class="card__other-text">
                                    Пока пусто
                                </span>
                            </div>
                        </ul>
                    </li>

                    <li class="card">
                        <div class="card__image-wrapper">
                            <img
                                alt=""
                                src="./images/avatar-2.webp"
                                class="card__image">
                        </div>
                        <p class="card__name">
                            Темик
                        </p>
                        <div class="card__control">
                            <button class="card__control-button card__control-button__delete"></button>
                            <span class="card__control-count">0</span>
                            <button class="card__control-button card__control-button__add"></button>
                        </div>
                        <ul class="card__comment-list">
                            <li class="card__comment">
                                <div class="card__comment-info">
                                    <span class="card__comment-date">
                                        18.11
                                    </span>
                                    <span class="card__comment-author">
                                        Татьян
                                    </span>
                                    <span class="card__comment-count card__comment-count__bad">
                                        -1
                                    </span>
                                </div>
                                <p class="card__comment-text">
                                    Назвал дурой
                                </p>
                            </li>
                            <div class="card__other-comment">
                                <span class="card__other-text">
                                    Пока пусто
                                </span>
                            </div>
                        </ul>
                    </li>

                    <li class="card">
                        <div class="card__image-wrapper">
                            <img
                                alt=""
                                src="./images/avatar-3.webp"
                                class="card__image">
                        </div>
                        <p class="card__name">
                            Ирэн
                        </p>
                        <div class="card__control">
                            <button class="card__control-button card__control-button__delete"></button>
                            <span class="card__control-count">0</span>
                            <button class="card__control-button card__control-button__add"></button>
                        </div>
                        <ul class="card__comment-list">
                            <li class="card__comment">
                                <div class="card__comment-info">
                                    <span class="card__comment-date">
                                        18.11
                                    </span>
                                    <span class="card__comment-author">
                                        Ирэн
                                    </span>
                                    <span class="card__comment-count card__comment-count__good">
                                        +1
                                    </span>
                                </div>
                                <p class="card__comment-text">
                                    Я супер
                                </p>
                            </li>
                            <div class="card__other-comment">
                                <span class="card__other-text">
                                    Пока пусто
                                </span>
                            </div>
                        </ul>
                    </li>

                    <li class="card">
                        <div class="card__image-wrapper">
                            <img
                                alt=""
                                src="./images/avatar-4.webp"
                                class="card__image">
                        </div>
                        <p class="card__name">
                            Татьян
                        </p>
                        <div class="card__control">
                            <button class="card__control-button card__control-button__delete"></button>
                            <span class="card__control-count">0</span>
                            <button class="card__control-button card__control-button__add"></button>
                        </div>
                        <ul class="card__comment-list">
                            <li class="card__comment">
                                <div class="card__comment-info">
                                    <span class="card__comment-date">
                                        18.11
                                    </span>
                                    <span class="card__comment-author">
                                        Темик
                                    </span>
                                    <span class="card__comment-count card__comment-count__good">
                                        +1
                                    </span>
                                </div>
                                <p class="card__comment-text">
                                    Была хорошей девочкой
                                </p>
                            </li>
                            <div class="card__other-comment">
                                <span class="card__other-text">
                                    Пока пусто
                                </span>
                            </div>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>
        <section class="popup">
            <div class="popup__block">
                <button class="popup__close"></button>
                <h2 class="popup__title">
                    Обоснуй свою оценку
                </h2>
                <form name="popupForm" class="popup__form" action="">
                    <div class="popup__inputs-wrapper">
                        <div class="popup__dropdown">
                            <div class="popup__input popup__input-header">
                                <span class="popup__input-label">Ты кто?</span>
                                <div class="popup__input-arrow popup__input-arrow_active"></div>
                            </div>
                            <ul class="popup__input-body">
                                <li class="popup__input-item">Тилик</li>
                                <li class="popup__input-item">Темик</li>
                                <li class="popup__input-item">Ирэн</li>
                                <li class="popup__input-item">Татьян</li>
                            </ul>
                        </div>
                        <textarea 
                            class="popup__input popup__input_comment"
                            placeholder="Ну давай..."></textarea>
                    </div>
                    <span class="popup__error">
                        Ты долбаеб? Тут всего 2 формы и ты не можешь их все заполнить????
                    </span>
                    <button type="submit" class="popup__submit">
                        Отправить
                    </button>
                </form>
            </div>
        </section>
    </main>
</body>
</html>

<script>
    const card = document.querySelectorAll('.card');
    const popup = document.querySelector('.popup');
    const popupCloseButton = document.querySelector('.popup__close');

    const popupDropdown = document.querySelector('.popup__dropdown')

    function popupOpen () {
        popup.classList.add('popup_show');
    }
    
    function popupClose () {
        popup.classList.remove('popup_show');
    }
    
    card.forEach((item) => {
        const buttonMinus = item.querySelector('.card__control-button__delete');
        const buttonPlus = item.querySelector('.card__control-button__add');
        const counterValue = item.querySelector('.card__control-count');
        let counter = 0;
        
        buttonMinus.addEventListener('click', () => {
            popupOpen();
            counter--;
            counterValue.innerHTML = counter;

            if(counter < 0) {
                counterValue.classList.remove('card__control-count__good')
                counterValue.classList.add('card__control-count__bad')
            } else if (counter === 0) {
                counterValue.classList.remove('card__control-count__bad')
                counterValue.classList.remove('card__control-count__good')
            }
        })

        buttonPlus.addEventListener('click', () => {
            popupOpen();
            counter++;
            counterValue.innerHTML = counter;

            if(counter > 0) {
                counterValue.classList.remove('card__control-count__bad')
                counterValue.classList.add('card__control-count__good')
            } else if (counter === 0) {
                counterValue.classList.remove('card__control-count__bad')
                counterValue.classList.remove('card__control-count__good')
            }
        })

        popupCloseButton.addEventListener('click', () => {
            popupClose();
        })

        popupDropdown.addEventListener('click', () => {
                popupDropdown.classList.add('popup__dropdown_open')
        })

    })
</script>